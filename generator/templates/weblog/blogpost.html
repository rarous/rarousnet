<!doctype html>
<html lang="cs">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta http-equiv="delegate-ch" content="sec-ch-width https://res.cloudinary.com; sec-ch-dpr https://res.cloudinary.com; sec-ch-viewport-width https://res.cloudinary.com;">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title></title>
  <link rel="canonical" href="">
  <link rel="syndication" href="">
  <link rel="webmention" href="https://webmention.io/www.rarous.net/webmention">
  <link rel="preconnect" href="//www.google-analytics.com">
  <link rel="preconnect" href="https://use.typekit.net">
  <link rel="preconnect" href="https://p.typekit.net">
  <link rel="preload" as="font" crossorigin type="font/woff2"
        href="/design/blog/iosevka/woff2/iosevka-sparkle-regular.woff2">
  <link rel="preload" as="font" crossorigin type="font/woff2"
        href="/design/blog/iosevka/woff2/iosevka-sparkle-italic.woff2">
  <link rel="preload" as="font" crossorigin type="font/woff2"
        href="/design/blog/iosevka/woff2/iosevka-sparkle-bold.woff2">
  <link rel="preload" as="font" crossorigin type="font/woff2" href="/design/blog/iosevka/woff2/iosevka-regular.woff2">
  <link rel="preload" as="font" crossorigin type="font/woff2" href="/design/blog/iosevka/woff2/iosevka-italic.woff2">
  <link rel="preload" as="font" crossorigin type="font/woff2" href="/design/blog/iosevka/woff2/iosevka-bold.woff2">
  <link rel="preload" as="font" crossorigin type="font/woff2"
        href="/design/blog/iosevka/woff2/iosevka-sparkle-bolditalic.woff2">
  <meta name="author" content="">
  <meta name="description" content="">
  <link rel="home" href="/weblog/">
  <link rel="feed" href="/weblog/feed/">
  <link rel="alternate" type="application/rss+xml" href="https://feeds.feedburner.com/rarous-weblog"
        title="rarouš.weblog - poslední články">
  <link rel="pingback" href="https://webmention.io/www.rarous.net/xmlrpc">
  <link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
  <meta property="fb:app_id" content="215763288621854">
  <meta property="og:type" content="article">
  <meta property="og:site_name" content="rarouš.weblog">
  <meta property="article:published_time" content="">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:domain" content="rarous.net">
  <meta name="twitter:site" content="@rarousweblog">
  <meta name="twitter:creator" content="">
  <meta name="twitter:title" property="og:title" content="">
  <meta name="twitter:image" property="og:image" content="">
  <meta name="twitter:description" content="">
  <script>
    self._ga = {
      // Full Measurement Protocol param reference:
      // https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters
      data: {
        v: "1", // Measurement Protocol version.
        tid: "UA-90726-1", // Tracking ID.
        cid: `${Date.now()}${Math.random()}`, // Client ID.
        dl: location.href, // Document location.
        aip: 1, // Anonymize IP
      },
      send(additionalParams) {
        navigator.sendBeacon(
          "https://google-analytics.com/collect",
          new URLSearchParams({
            ...this.data,
            ...additionalParams,
          }).toString()
        );
      },
    };
    _ga.send({ t: "pageview" });
  </script>
  <!--[if lt IE 9]>
  <script src=https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js></script><![endif]-->
  <link rel="stylesheet" href="https://use.typekit.net/xhz7oko.css">
  <link rel="stylesheet" href="/design/blog/iosevka.css">
  <link rel="stylesheet" href="/design/blog/blog.css">
  <link rel="shortcut icon" href="/design/blog/favicon.png" type="image/png">
  <meta name="theme-color" content="#f77146">
</head>
<body id="rarous">
<div id="top">

  <div class="wai">
    <a href="#content" accesskey="0" tabindex="2">Na obsah stránky</a>
  </div>

  <header id="head">
    <h1><a href="/weblog/" title="Přejít na hlaní stránku blogu">rarouš.weblog<span class="image"></span></a></h1>
  </header>

  <main class="h-entry" id="content">
    <article vocab="https://schema.org" typeof="BlogPosting">
      <link class="u-featured" property="image" href="">
      <header>
        <h1 class="p-name" property="headline"></h1>
        <p class="info">
            <span class="p-author" property="author" typeof="Person">
              <strong property="name"></strong>
            </span>
          |
          <time class="dt-published" property="datePublished" datetime=""></time>
          <span class="noprint"> | <a property="url" rel="bookmark" href="#" title="Permalink"># permalink</a></span>
        </p>
      </header>
      <div class="e-content" property="articleBody"></div>
      <footer>
        Publikováno v:&nbsp;
        <nav class="breadcrumbs" typeof="BreadcrumbList">
          <span property="itemListElement" typeof="ListItem">
            <data property="position" value="1"></data>
            <a property="item" typeof="WebPage" href="/">
              <span property="name">rarouš.net</span></a></span>/<span property="itemListElement" typeof="ListItem">
            <data property="position" value="2"></data>
            <a property="item" typeof="WebPage" href="/weblog/">
              <span property="name">weblog</span></a></span>/<span property="itemListElement" typeof="ListItem">
            <data property="position" value="3"></data>
            <a property="item" typeof="WebPage" class="year" href="/weblog/2021/">
              <span property="name">2021</span></a></span>/<span property="itemListElement" typeof="ListItem">
            <data property="position" value="4"></data>
            <a property="item" typeof="WebPage" class="month" href="/weblog/2021/03/">
              <span property="name">březen</span></a></span>/<span property="itemListElement" typeof="ListItem">
            <data property="position" value="5"></data>
            <a property="item" typeof="WebPage" class="day" href="/weblog/2021/03/20/">
              <span property="name">20</span></a></span>
        </nav>;
        Označeno štítky:&nbsp;
        <nav class="tags">
          <ul>
            <li><a class="p-category" property="articleSection" rel="tag" href=""></a></li>
          </ul>
        </nav>
      </footer>
    </article>

    <p>Našli jste v článku chybu? Máte námět na reportáž? <a href="https://github.com/rarous/rarousnet/issues/new">Založte
      mi ticket</a>.

    <section id="webmentions"></section>
    <script type="module">
      import { render, html } from "https://cdn.skypack.dev/lit-html?min";
      const titles = new Map([
        ["like-of", "Líbilo se"],
        ["repost-of", "Přeposlal dál"],
      ]);

      function groupByType(webmentions) {
        const byType = new Map();
        for (const post of webmentions) {
          const key = post["wm-property"];
          const values = byType.get(key) ?? [];
          values.push(post);
          byType.set(key, values);
        }
        return byType;
      }

    function groupTemplate(type, title, items) {
      if (!items?.length) return;
      return html`
        <section class="webmentions">
          <p><data value="${items.length}">${items.length}x ${title}</data></p>
          <ul>
            ${items.map(item => html`
              <li>
                <a class="${type}" href="${item.url}" title="${item.author.name}">
                  <date datetime="${item.published}"></date>
                  <img alt="${item.author.name}"
                     src="${item.author.photo}"
                     width="32" height="32"
                     loading="lazy" decoding="async">
                </a>
              </li>
            `)}
          </ul>
        </section>
      `
    }

      function webmentionsTemplate(webmentions) {
        if (!webmentions.length) return;
        const byType = groupByType(webmentions);
        return html`
          <h2>Reakce v síti</h2>
          ${groupTemplate("u-like", "se líbilo", byType.get("like-of"))}
          ${groupTemplate("u-repost", "přeposláno dál", byType.get("repost-of"))}
        `;
      }

      async function main({ url, webmentionsRoot }) {
        const resp = await fetch(`/api/v1/weblog?${new URLSearchParams({ url })}`);
        if (!resp.ok) return;
        const { webmentions } = await resp.json();
        render(webmentionsTemplate(webmentions), webmentionsRoot);
      }

      await main({
        url: location.href,
        webmentionsRoot: document.getElementById("webmentions"),
      });
    </script>
  </main>

  <footer class="footer"></footer>
</div>
<script type="module">
  const codes = document.querySelectorAll("pre>code");
  for (const code of codes) {
    const pre = code.parentElement;
    for (const lang of pre.classList) {
      code.classList.add(`language-${lang}`);
    }
  }
</script>
<script defer src="/assets/js/prism.js"></script>
</body>
</html>
